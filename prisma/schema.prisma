generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  name       String   @unique
  skillSetId String   @db.ObjectId
  skillSet   SkillSet @relation(fields: [skillSetId], references: [id])
}

model SkillSet {
  id           String @id @default(auto()) @map("_id") @db.ObjectId
  strength     Float
  dexterity    Float
  endurance    Float
  intelligence Float
  karma        Float
  User         User[]
}

enum ESkills {
  strength
  dexterity
  endurance
  intelligence
  karma
}

model Action {
  id              String           @id @default(auto()) @map("_id") @db.ObjectId
  name            String           @unique
  value           Float
  valueType       EActionValueType
  affectingSkills AffectingSkill[]
  MainAction      MainAction[]
  ExtraAction     ExtraAction[]
}

type AffectingSkill {
  name    ESkills
  divider Float
}

enum EActionValueType {
  percent
  flat
}

model MainAction {
  id       String @id @default(auto()) @map("_id") @db.ObjectId
  actionId String @db.ObjectId
  action   Action @relation(fields: [actionId], references: [id])
}

model ExtraAction {
  id       String @id @default(auto()) @map("_id") @db.ObjectId
  actionId String @db.ObjectId
  action   Action @relation(fields: [actionId], references: [id])
}
