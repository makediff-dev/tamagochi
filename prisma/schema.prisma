generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id     String     @id @default(auto()) @map("_id") @db.ObjectId
  name   String     @unique
  skills SkillSet[]
}

model SkillSet {
  id           String @id @default(auto()) @map("_id") @db.ObjectId
  user         User   @relation(fields: [userId], references: [id])
  userId       String @unique @db.ObjectId
  strength     Float
  dexterity    Float
  endurance    Float
  intelligence Float
  karma        Float
}

enum ESkills {
  strength
  dexterity
  endurance
  intelligence
  karma
}

model Action {
  id             String           @id @default(auto()) @map("_id") @db.ObjectId
  name           String           @unique
  value          Float
  valueType      EActionValueType
  skills         ESkills[]
  skillsDividers Float[]
  MainAction     MainAction[]
  ExtraAction    ExtraAction[]
}

enum EActionValueType {
  percent
  flat
}

model MainAction {
  id       String @id @default(auto()) @map("_id") @db.ObjectId
  actionId String @db.ObjectId
  action   Action @relation(fields: [actionId], references: [id])
}

model ExtraAction {
  id       String @id @default(auto()) @map("_id") @db.ObjectId
  actionId String @db.ObjectId
  action   Action @relation(fields: [actionId], references: [id])
}
